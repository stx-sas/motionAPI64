<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MotionAPI64: KMApi Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MotionAPI64
   </div>
   <div id="projectbrief">example for softMC MotionAPI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_k_m_api-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">KMApi Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> class for connecting and communicating with MC.<br />
Use the <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> class inside any other program. <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> supports a direct access via the KMAPI class. <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> Dll, also, contains a set of wrapper functions.  
 <a href="class_k_m_api.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_k_m_api_8h_source.html">KMApi.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac478ca1293fc8c15519b890004de4d94"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_k_m_api_8h.html#ae0351993802108783cd7af60e4527f83">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#ac478ca1293fc8c15519b890004de4d94">SetCallback</a> (<a class="el" href="_k_m_api_8h.html#ae0351993802108783cd7af60e4527f83">void</a> *callback)</td></tr>
<tr class="memdesc:ac478ca1293fc8c15519b890004de4d94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a pointer to a callback function. Assign the callback function to receive async messages such as status and error notifications<br />
.  <a href="#ac478ca1293fc8c15519b890004de4d94">More...</a><br /></td></tr>
<tr class="separator:ac478ca1293fc8c15519b890004de4d94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b9522caef12178123686bfaa8c0bd2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#a62b9522caef12178123686bfaa8c0bd2">Connect</a> (LPSTR ip, int port)</td></tr>
<tr class="memdesc:a62b9522caef12178123686bfaa8c0bd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to a specific IP and port.<br />
The connect function tries to connect a specific IP:port.<br />
 It may return Timeout or connection refused. You can always check for last error and get detailed description from the socket.  <a href="#a62b9522caef12178123686bfaa8c0bd2">More...</a><br /></td></tr>
<tr class="separator:a62b9522caef12178123686bfaa8c0bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3b7a85fa9c364f5d4a83eb3a9bb908f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#ac3b7a85fa9c364f5d4a83eb3a9bb908f">ExecCommand</a> (<a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a> command, LPSTR response, int rspLength)</td></tr>
<tr class="memdesc:ac3b7a85fa9c364f5d4a83eb3a9bb908f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes a command and waits for a response.<br />
 This method will execute selected command and will return a string with MCs response.<br />
 The function will return a timeout error if no response was receive before defined timeout. See SetTimeout for details. Calling this function will force <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> to wait for acknowledge and prompt frames before it returns<br />
.  <a href="#ac3b7a85fa9c364f5d4a83eb3a9bb908f">More...</a><br /></td></tr>
<tr class="separator:ac3b7a85fa9c364f5d4a83eb3a9bb908f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9acf71bd1ca46b6a581995ec77c047e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#af9acf71bd1ca46b6a581995ec77c047e">InnerExecCommand</a> (<a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a> command, LPSTR response, int rspLength, bool isAuth)</td></tr>
<tr class="memdesc:af9acf71bd1ca46b6a581995ec77c047e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as ExecCommand but with extra parameter (isAuth ) is for authentication purpose.<br />
Do not use this method unless you want to do a manual authentication.<br />
For authentication use <a class="el" href="class_k_m_api.html#aad98f90a1cd165d8ae9610cd0734f903">Authenticate()</a> For command execution use <a class="el" href="class_k_m_api.html#ac3b7a85fa9c364f5d4a83eb3a9bb908f">ExecCommand</a><br />
The function will return a timeout error if no response was received before defined timeout.<br />
See <a class="el" href="class_k_m_api.html#a701f3f79e8e417b4e2687e95193623ee" title="Sets the timeout to connect and for the execute commands.  Set timeout before connecting otherwise it...">KMApi::SetTimeout</a> for details.<br />
.  <a href="#af9acf71bd1ca46b6a581995ec77c047e">More...</a><br /></td></tr>
<tr class="separator:af9acf71bd1ca46b6a581995ec77c047e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c7a05d3dd71f3399098d2089f90dd4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#a8c7a05d3dd71f3399098d2089f90dd4d">SendCommand</a> (<a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a> command, bool isAuth=false)</td></tr>
<tr class="memdesc:a8c7a05d3dd71f3399098d2089f90dd4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a command but doesn't to waits for a response. The function send a command to Soft MC and returns.  <a href="#a8c7a05d3dd71f3399098d2089f90dd4d">More...</a><br /></td></tr>
<tr class="separator:a8c7a05d3dd71f3399098d2089f90dd4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad68cf168edd87d4ddbcc349190dca2aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#ad68cf168edd87d4ddbcc349190dca2aa">DownloadFile</a> (<a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a> sFilePath, <a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a> sFileName)</td></tr>
<tr class="memdesc:ad68cf168edd87d4ddbcc349190dca2aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Downloads a file from Soft MC to a specific folder on PC.  <a href="#ad68cf168edd87d4ddbcc349190dca2aa">More...</a><br /></td></tr>
<tr class="separator:ad68cf168edd87d4ddbcc349190dca2aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a967f83675211ba55f27e22e27ef6532c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#a967f83675211ba55f27e22e27ef6532c">UploadFile</a> (<a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a> Filename)</td></tr>
<tr class="memdesc:a967f83675211ba55f27e22e27ef6532c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uploads a file to Soft MC.  <a href="#a967f83675211ba55f27e22e27ef6532c">More...</a><br /></td></tr>
<tr class="separator:a967f83675211ba55f27e22e27ef6532c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a01d4d06c5c8daf98b12496e0cd4b4c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#a9a01d4d06c5c8daf98b12496e0cd4b4c">GetLastError</a> (int &amp;errorCode, LPSTR sErrorMessage, int msgLength)</td></tr>
<tr class="memdesc:a9a01d4d06c5c8daf98b12496e0cd4b4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets last error from socket or from soft MC. Gets the last error description.<br />
 Use this function after getting an error code from <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> commands.<br />
 The method may return error text from soft MC or an error description from socket (last socket error)<br />
.  <a href="#a9a01d4d06c5c8daf98b12496e0cd4b4c">More...</a><br /></td></tr>
<tr class="separator:a9a01d4d06c5c8daf98b12496e0cd4b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a701f3f79e8e417b4e2687e95193623ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_k_m_api_8h.html#ae0351993802108783cd7af60e4527f83">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#a701f3f79e8e417b4e2687e95193623ee">SetTimeout</a> (<a class="el" href="general_defines_8h.html#a4bc0c5cb0ef29fb77d5bfc03383a0f01">KMTimeout</a> type, DWORD timeout)</td></tr>
<tr class="memdesc:a701f3f79e8e417b4e2687e95193623ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the timeout to connect and for the execute commands.<br />
 Set timeout before connecting otherwise it'll use default timeouts.  <a href="#a701f3f79e8e417b4e2687e95193623ee">More...</a><br /></td></tr>
<tr class="separator:a701f3f79e8e417b4e2687e95193623ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaddac0bedb19172b44e14d64f78d71df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#aaddac0bedb19172b44e14d64f78d71df">DetectDevices</a> (DWORD timeout)</td></tr>
<tr class="memdesc:aaddac0bedb19172b44e14d64f78d71df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects devices and waits for all responses received within a timeout. This function will send a UDP message to all local networks and will returns after timeout.<br />
 It returns KMRet_OK if succeeds. You may want to call this function only when you want to refresh stored device list.<br />
 You may call GetDeviceList or GetDevicesDescriptor to read list.<br />
 See example below.  <a href="#aaddac0bedb19172b44e14d64f78d71df">More...</a><br /></td></tr>
<tr class="separator:aaddac0bedb19172b44e14d64f78d71df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca7fec3bad12628eb89bfb59d6d9b50e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_m_c_device.html">MCDevice</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#aca7fec3bad12628eb89bfb59d6d9b50e">GetDeviceList</a> ()</td></tr>
<tr class="memdesc:aca7fec3bad12628eb89bfb59d6d9b50e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a list of last detected devices.<br />
Call this method after calling DetectDevices to get a list of detected device.<br />
you may treat return value as an array of structs, or just move a pointer over the return buffer.<br />
.  <a href="#aca7fec3bad12628eb89bfb59d6d9b50e">More...</a><br /></td></tr>
<tr class="separator:aca7fec3bad12628eb89bfb59d6d9b50e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1f9a3babc2cd7cbf34db40855777392"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#ab1f9a3babc2cd7cbf34db40855777392">GetDevicesDescriptor</a> (BOOL bUpdate)</td></tr>
<tr class="memdesc:ab1f9a3babc2cd7cbf34db40855777392"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a list of devices in a CSV format. Returns a string in a comma-separated-string<br />
 e.g.<br />
 MyMC1, 10.0.0.11, S16C-123<br />
 Mc2nd, 10.0.0.15, S16C-111<br />
.  <a href="#ab1f9a3babc2cd7cbf34db40855777392">More...</a><br /></td></tr>
<tr class="separator:ab1f9a3babc2cd7cbf34db40855777392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad98f90a1cd165d8ae9610cd0734f903"><td class="memItemLeft" align="right" valign="top"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#aad98f90a1cd165d8ae9610cd0734f903">Authenticate</a> (const char *password)</td></tr>
<tr class="memdesc:aad98f90a1cd165d8ae9610cd0734f903"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs an authentication process.<br />
If Soft MC requires authentication, you may do it using this function.<br />
In order to authenticate, call this method with the right password as string.<br />
.  <a href="#aad98f90a1cd165d8ae9610cd0734f903">More...</a><br /></td></tr>
<tr class="separator:aad98f90a1cd165d8ae9610cd0734f903"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9732a5b410dde5a41367a8f6e2964a1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_k_m_api_8h.html#ae0351993802108783cd7af60e4527f83">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#a9732a5b410dde5a41367a8f6e2964a1f">CallCallback</a> (int fType, <a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a> message)</td></tr>
<tr class="memdesc:a9732a5b410dde5a41367a8f6e2964a1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a new message (async Frame) is ready. Method is called when a new async message is available. The method will call the callback function defined in SetCallback You do not want to call it yourself unless you want to simulate a callback to callback function.  <a href="#a9732a5b410dde5a41367a8f6e2964a1f">More...</a><br /></td></tr>
<tr class="separator:a9732a5b410dde5a41367a8f6e2964a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a397e7deeb898fb4b95a947466a24d37e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#a397e7deeb898fb4b95a947466a24d37e">KMApi</a> ()</td></tr>
<tr class="memdesc:a397e7deeb898fb4b95a947466a24d37e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor: INTERNAL: DO NOT USE! use * <a class="el" href="_k_m_api_8h.html#ace4118c6ba20659c52106507061756cb">KMNewKMAPI()</a> instead. Do not use this constructor use <a class="el" href="_k_m_api_8h.html#ace4118c6ba20659c52106507061756cb" title="Creates and returns a new KMApi object. Use this method to create a new KMApi object (do not create i...">KMNewKMAPI()</a> to get a new <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> object.  <a href="#a397e7deeb898fb4b95a947466a24d37e">More...</a><br /></td></tr>
<tr class="separator:a397e7deeb898fb4b95a947466a24d37e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cde27a75db502ac75309b6a5395a688"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_k_m_api.html#a6cde27a75db502ac75309b6a5395a688">~KMApi</a> ()</td></tr>
<tr class="memdesc:a6cde27a75db502ac75309b6a5395a688"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor: INTERNAL: DO NOT USE! Use <a class="el" href="_k_m_api_8h.html#a3ddb56384a6d0d3f4c21a3669bff6333" title="Releases KMApi object. Use this method to release KMApi object and free memory. Here is an example of...">MCFreeKMApi()</a> instead. Do not use this destructor use MCFreeKMApi( kmapi ) to free object.  <a href="#a6cde27a75db502ac75309b6a5395a688">More...</a><br /></td></tr>
<tr class="separator:a6cde27a75db502ac75309b6a5395a688"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> class for connecting and communicating with MC.<br />
Use the <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> class inside any other program. <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> supports a direct access via the KMAPI class. <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> Dll, also, contains a set of wrapper functions. </p>

<p class="definition">Definition at line <a class="el" href="_k_m_api_8h_source.html#l00041">41</a> of file <a class="el" href="_k_m_api_8h_source.html">KMApi.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a397e7deeb898fb4b95a947466a24d37e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a397e7deeb898fb4b95a947466a24d37e">&#9670;&nbsp;</a></span>KMApi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KMApi::KMApi </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor: INTERNAL: DO NOT USE! use * <a class="el" href="_k_m_api_8h.html#ace4118c6ba20659c52106507061756cb">KMNewKMAPI()</a> instead. Do not use this constructor use <a class="el" href="_k_m_api_8h.html#ace4118c6ba20659c52106507061756cb" title="Creates and returns a new KMApi object. Use this method to create a new KMApi object (do not create i...">KMNewKMAPI()</a> to get a new <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> object. </p>

</div>
</div>
<a id="a6cde27a75db502ac75309b6a5395a688"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cde27a75db502ac75309b6a5395a688">&#9670;&nbsp;</a></span>~KMApi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KMApi::~KMApi </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor: INTERNAL: DO NOT USE! Use <a class="el" href="_k_m_api_8h.html#a3ddb56384a6d0d3f4c21a3669bff6333" title="Releases KMApi object. Use this method to release KMApi object and free memory. Here is an example of...">MCFreeKMApi()</a> instead. Do not use this destructor use MCFreeKMApi( kmapi ) to free object. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aad98f90a1cd165d8ae9610cd0734f903"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad98f90a1cd165d8ae9610cd0734f903">&#9670;&nbsp;</a></span>Authenticate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> KMApi::Authenticate </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>password</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs an authentication process.<br />
If Soft MC requires authentication, you may do it using this function.<br />
In order to authenticate, call this method with the right password as string.<br />
. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Password</td><td>The password (utf8 string) to authenticate with MC. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba" title="a response code for all KMApi functions ">KMResponse</a> Return code. Note: MC does not return error in case of a wrong password </dd></dl>

</div>
</div>
<a id="a9732a5b410dde5a41367a8f6e2964a1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9732a5b410dde5a41367a8f6e2964a1f">&#9670;&nbsp;</a></span>CallCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_k_m_api_8h.html#ae0351993802108783cd7af60e4527f83">void</a> KMApi::CallCallback </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a>&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when a new message (async Frame) is ready. Method is called when a new async message is available. The method will call the callback function defined in SetCallback You do not want to call it yourself unless you want to simulate a callback to callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fType</td><td>Frame type id (FrameTypeEnum) : The type of frame or a ERR_ON_CLOSE when connection is unexpectedly dropped. </td></tr>
    <tr><td class="paramname">message</td><td>the text message to send to callback. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba" title="a response code for all KMApi functions ">KMResponse</a> Return code. </dd></dl>

</div>
</div>
<a id="a62b9522caef12178123686bfaa8c0bd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62b9522caef12178123686bfaa8c0bd2">&#9670;&nbsp;</a></span>Connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> KMApi::Connect </td>
          <td>(</td>
          <td class="paramtype">LPSTR&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to a specific IP and port.<br />
The connect function tries to connect a specific IP:port.<br />
 It may return Timeout or connection refused. You can always check for last error and get detailed description from the socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ip</td><td>The IP string to connect to. </td></tr>
    <tr><td class="paramname">port</td><td>A port number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba" title="a response code for all KMApi functions ">KMResponse</a> Return code. </dd></dl>

</div>
</div>
<a id="aaddac0bedb19172b44e14d64f78d71df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaddac0bedb19172b44e14d64f78d71df">&#9670;&nbsp;</a></span>DetectDevices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> KMApi::DetectDevices </td>
          <td>(</td>
          <td class="paramtype">DWORD&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects devices and waits for all responses received within a timeout. This function will send a UDP message to all local networks and will returns after timeout.<br />
 It returns KMRet_OK if succeeds. You may want to call this function only when you want to refresh stored device list.<br />
 You may call GetDeviceList or GetDevicesDescriptor to read list.<br />
 See example below. </p>
<div class="fragment"><div class="line">iError = m_pKmapi-&gt;DetectDevices(200);  <span class="comment">// wait 200 ms for all responses</span></div><div class="line"><span class="keywordflow">if</span> (iError == <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cbaa899ce25ec47ef4f50799c40339e60496">KMRet_OK</a>)</div><div class="line">{</div><div class="line"><a class="code" href="class_m_c_device.html">MCDevice</a>* MCDevices = NULL;</div><div class="line">MCDevices = m_pKmapi-&gt;GetDeviceList();</div><div class="line"><span class="keywordflow">if</span> (MCDevices != NULL)</div><div class="line">    <span class="keywordflow">while</span> ( strlen(MCDevices[j].ip) &gt; 0) { <span class="comment">// if ip is &quot;&quot; it means end of list </span></div><div class="line">       CString csName = MCDevices[j].<a class="code" href="class_m_c_device.html#a9809ff4f73c3f9ca364e9c5a646cff07">name</a>;</div><div class="line">       CString csIPAddress = MCDevices[j].<a class="code" href="class_m_c_device.html#afc77a5d624ae8888ae1a542e55edc8c3">ip</a>;</div><div class="line">       CString csSerialNumber = MCDevices[j].<a class="code" href="class_m_c_device.html#a69e007222c5efaf88d7297020ac77c0d">serialNumber</a>;</div><div class="line">       CString csMessage; csMessage.Format(<span class="stringliteral">&quot;found %s, IP: %s, serial:%s&quot;</span>,</div><div class="line">                                                                MCDevices[j].name,</div><div class="line">                                                                MCDevices[j].ip,</div><div class="line">                                                                MCDevices[j].serialNumber);</div><div class="line"></div><div class="line">    ShowMessage(csMessage);</div><div class="line"></div><div class="line">}</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>how long to wait for MC's responses </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba" title="a response code for all KMApi functions ">KMResponse</a> the return code. </dd></dl>

</div>
</div>
<a id="ad68cf168edd87d4ddbcc349190dca2aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad68cf168edd87d4ddbcc349190dca2aa">&#9670;&nbsp;</a></span>DownloadFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> KMApi::DownloadFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a>&#160;</td>
          <td class="paramname"><em>sFilePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a>&#160;</td>
          <td class="paramname"><em>sFileName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Downloads a file from Soft MC to a specific folder on PC. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sFilePath</td><td>An existing folder name to download to. </td></tr>
    <tr><td class="paramname">sFileName</td><td>A string with an existing filename to download from Soft MC. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba" title="a response code for all KMApi functions ">KMResponse</a> Return code. </dd></dl>

</div>
</div>
<a id="ac3b7a85fa9c364f5d4a83eb3a9bb908f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3b7a85fa9c364f5d4a83eb3a9bb908f">&#9670;&nbsp;</a></span>ExecCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> KMApi::ExecCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a>&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LPSTR&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rspLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes a command and waits for a response.<br />
 This method will execute selected command and will return a string with MCs response.<br />
 The function will return a timeout error if no response was receive before defined timeout. See SetTimeout for details. Calling this function will force <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> to wait for acknowledge and prompt frames before it returns<br />
. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>A utf8 string with command to run on Soft MC. </td></tr>
    <tr><td class="paramname">response</td><td>A buffer to copy response to. </td></tr>
    <tr><td class="paramname">rspLength</td><td>The length of the response buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba" title="a response code for all KMApi functions ">KMResponse</a>: The return code.<br />
 May be an error from MC or any other error such a timeout, buffer too small<br />
 In all cases you want to call <a class="el" href="class_k_m_api.html#a9a01d4d06c5c8daf98b12496e0cd4b4c">GetLastError</a> to understand what went wrong.<br />
<br />
 <b>Example:</b> Run command in soft MC and present response.<br />
<div class="fragment"><div class="line"><a class="code" href="class_k_m_api.html">KMApi</a>* pKmapi = <a class="code" href="_k_m_api_8h.html#ace4118c6ba20659c52106507061756cb">KMNewKMAPI</a>();</div><div class="line"><span class="keywordflow">if</span> (pKmapi != NULL)</div><div class="line">{</div><div class="line">    <span class="comment">// 10 seconds timeout for connect</span></div><div class="line">    pKmapi-&gt;<a class="code" href="class_k_m_api.html#a701f3f79e8e417b4e2687e95193623ee">SetTimeout</a>(<a class="code" href="general_defines_8h.html#a4bc0c5cb0ef29fb77d5bfc03383a0f01aa8d41dfd07f19106258b01ff94ac8531">KMTO_Connect</a>, 10000); </div><div class="line">    <span class="comment">// 15s timeout for command execution</span></div><div class="line">    pKmapi-&gt;<a class="code" href="class_k_m_api.html#a701f3f79e8e417b4e2687e95193623ee">SetTimeout</a>(<a class="code" href="general_defines_8h.html#a4bc0c5cb0ef29fb77d5bfc03383a0f01a18f6c972da47dc8dd9c0be724d58b760">KMTO_Exec</a>, 15000); </div><div class="line"></div><div class="line">    <span class="comment">// connect to IP 10.0.0.5 port 4001</span></div><div class="line">    <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> iError = pKmapi-&gt;<a class="code" href="class_k_m_api.html#a62b9522caef12178123686bfaa8c0bd2">Connect</a>(<span class="stringliteral">&quot;10.0.0.5&quot;</span>, 4001);  </div><div class="line">    <span class="keywordflow">if</span> (iError == <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cbaa899ce25ec47ef4f50799c40339e60496">KMRet_OK</a>) <span class="comment">// if connected</span></div><div class="line">    {</div><div class="line">        <span class="keywordtype">char</span> sOutBuffer[2048];</div><div class="line">        <span class="comment">// execute a command: sends &#39;?ver&#39; to Soft MC and wait for a response</span></div><div class="line">        <span class="keywordflow">if</span> ( pKmapi-&gt;<a class="code" href="class_k_m_api.html#ac3b7a85fa9c364f5d4a83eb3a9bb908f">ExecCommand</a>(<span class="stringliteral">&quot;?ver&quot;</span>, sOutBuffer, 2048) == <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cbaa899ce25ec47ef4f50799c40339e60496">KMRet_OK</a>)</div><div class="line">        {</div><div class="line">            ShowMessage(sOutBuffer,<span class="stringliteral">&quot;Version information&quot;</span>);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="comment">// Don&#39;t forget to free object</span></div><div class="line">    <a class="code" href="_k_m_api_8h.html#a3ddb56384a6d0d3f4c21a3669bff6333">MCFreeKMApi</a>(pKmapi);</div><div class="line">}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="aca7fec3bad12628eb89bfb59d6d9b50e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca7fec3bad12628eb89bfb59d6d9b50e">&#9670;&nbsp;</a></span>GetDeviceList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_m_c_device.html">MCDevice</a> * KMApi::GetDeviceList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a list of last detected devices.<br />
Call this method after calling DetectDevices to get a list of detected device.<br />
you may treat return value as an array of structs, or just move a pointer over the return buffer.<br />
. </p>
<dl class="section return"><dt>Returns</dt><dd>MCDevice* Returns a list of <a class="el" href="class_m_c_device.html" title="MC device details This is a struct returned from GetDeviceList where each struct contains Soft MC det...">MCDevice</a> struct.<br />
List ends with <a class="el" href="class_m_c_device.html" title="MC device details This is a struct returned from GetDeviceList where each struct contains Soft MC det...">MCDevice</a> object with an empty ip (ip == "")<br />
See DetectDevices for example </dd></dl>

</div>
</div>
<a id="ab1f9a3babc2cd7cbf34db40855777392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1f9a3babc2cd7cbf34db40855777392">&#9670;&nbsp;</a></span>GetDevicesDescriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * KMApi::GetDevicesDescriptor </td>
          <td>(</td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>bUpdate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a list of devices in a CSV format. Returns a string in a comma-separated-string<br />
 e.g.<br />
 MyMC1, 10.0.0.11, S16C-123<br />
 Mc2nd, 10.0.0.15, S16C-111<br />
. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bUpdate</td><td>true to update list before returns </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A string with all devices in a csv format.<br />
 The return string is in the following format: "Name , IP , Serial \n"... </dd></dl>

</div>
</div>
<a id="a9a01d4d06c5c8daf98b12496e0cd4b4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a01d4d06c5c8daf98b12496e0cd4b4c">&#9670;&nbsp;</a></span>GetLastError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> KMApi::GetLastError </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>errorCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LPSTR&#160;</td>
          <td class="paramname"><em>sErrorMessage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>msgLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets last error from socket or from soft MC. Gets the last error description.<br />
 Use this function after getting an error code from <a class="el" href="class_k_m_api.html" title="The KMApi class for connecting and communicating with MC. Use the KMApi class inside any other progra...">KMApi</a> commands.<br />
 The method may return error text from soft MC or an error description from socket (last socket error)<br />
. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errorCode</td><td>(Out value) the error code </td></tr>
    <tr><td class="paramname">sErrorMessage</td><td>(Out value) a buffer to fill error text from socket or from soft MC </td></tr>
    <tr><td class="paramname">msgLength</td><td>buffer size </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba" title="a response code for all KMApi functions ">KMResponse</a> Return code. Buffer Too Small or OK<br />
 <b>Example</b> Getting last error <div class="fragment"><div class="line"><span class="keywordflow">if</span> (pKmapi != NULL)</div><div class="line">{</div><div class="line">        <span class="keywordtype">char</span> sOutBuffer[2048];</div><div class="line">        <span class="comment">// execute a command: sends &#39;?ver&#39; to Soft MC and wait for a response</span></div><div class="line">        <span class="keywordflow">if</span> (( iRetCode = pKmapi-&gt;<a class="code" href="class_k_m_api.html#ac3b7a85fa9c364f5d4a83eb3a9bb908f">ExecCommand</a>(<span class="stringliteral">&quot;?ver&quot;</span>, sOutBuffer, 2048)) == <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cbaa899ce25ec47ef4f50799c40339e60496">KMRet_OK</a>)</div><div class="line">        {</div><div class="line">            ShowMessage(sOutBuffer,<span class="stringliteral">&quot;Version information&quot;</span>);</div><div class="line">        }<span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">          <span class="keywordtype">char</span> sErrorMessage[10000];</div><div class="line">          iRetCode = pKmapi-&gt;<a class="code" href="class_k_m_api.html#a9a01d4d06c5c8daf98b12496e0cd4b4c">GetLastError</a>(iErrCode,sErrorMessage, 10000);</div><div class="line">          <span class="keywordflow">if</span> (iRetCode == <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cbaa899ce25ec47ef4f50799c40339e60496">KMRet_OK</a>)</div><div class="line">            ShowError(iErrCode,sErrorMessage); <span class="comment">// show error message with error code (KMResponse) and a text message</span></div><div class="line">          <span class="keywordflow">else</span></div><div class="line">           <span class="comment">//.. try with a bigger buffer</span></div><div class="line">        }</div><div class="line">}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="af9acf71bd1ca46b6a581995ec77c047e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9acf71bd1ca46b6a581995ec77c047e">&#9670;&nbsp;</a></span>InnerExecCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> KMApi::InnerExecCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a>&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LPSTR&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rspLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isAuth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same as ExecCommand but with extra parameter (isAuth ) is for authentication purpose.<br />
Do not use this method unless you want to do a manual authentication.<br />
For authentication use <a class="el" href="class_k_m_api.html#aad98f90a1cd165d8ae9610cd0734f903">Authenticate()</a> For command execution use <a class="el" href="class_k_m_api.html#ac3b7a85fa9c364f5d4a83eb3a9bb908f">ExecCommand</a><br />
The function will return a timeout error if no response was received before defined timeout.<br />
See <a class="el" href="class_k_m_api.html#a701f3f79e8e417b4e2687e95193623ee" title="Sets the timeout to connect and for the execute commands.  Set timeout before connecting otherwise it...">KMApi::SetTimeout</a> for details.<br />
. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>A utf8 string with command to run on Soft MC. </td></tr>
    <tr><td class="paramname">response</td><td>A buffer to copy response to. </td></tr>
    <tr><td class="paramname">rspLength</td><td>The length of the response buffer. </td></tr>
    <tr><td class="paramname">isAuth</td><td>Is this command an authentication frame. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba" title="a response code for all KMApi functions ">KMResponse</a> Return code. </dd></dl>

</div>
</div>
<a id="a8c7a05d3dd71f3399098d2089f90dd4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c7a05d3dd71f3399098d2089f90dd4d">&#9670;&nbsp;</a></span>SendCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> KMApi::SendCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a>&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isAuth</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a command but doesn't to waits for a response. The function send a command to Soft MC and returns. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>A utf8 string with command to run on Soft MC. </td></tr>
    <tr><td class="paramname">isAuth</td><td>[Optional] Is this command an authentication frame (by default is false). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba" title="a response code for all KMApi functions ">KMResponse</a> Return code. </dd></dl>

</div>
</div>
<a id="ac478ca1293fc8c15519b890004de4d94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac478ca1293fc8c15519b890004de4d94">&#9670;&nbsp;</a></span>SetCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_k_m_api_8h.html#ae0351993802108783cd7af60e4527f83">void</a> KMApi::SetCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_k_m_api_8h.html#ae0351993802108783cd7af60e4527f83">void</a> *&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a pointer to a callback function. Assign the callback function to receive async messages such as status and error notifications<br />
. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>A pointer to a callback function: Callback function should be in the form of <br />
<div class="fragment"><div class="line"><span class="keywordtype">void</span> callback(<span class="keywordtype">int</span>, <a class="code" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a>) </div></div><!-- fragment --></td></tr>
  </table>
  </dd>
</dl>
<p>Callback definition in C++ </p><div class="fragment"><div class="line"><span class="comment">// My callback function definition</span></div><div class="line"><span class="keywordtype">void</span> CALLBACK MyCallback(<span class="keywordtype">int</span> frameType, <a class="code" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a> csMessage)</div><div class="line">{</div><div class="line">    CString msg;</div><div class="line">    <span class="keywordflow">switch</span> (frameType) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="general_defines_8h.html#a3173864bd95b396f75eb81f9782a7546af162c5b6deb42ca651affefbc39bb98f">ERROR_FRAME</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="general_defines_8h.html#a3173864bd95b396f75eb81f9782a7546aba87f511f853cd0aae77092b5496c1d5">ASYNC_FRAME</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="general_defines_8h.html#a3173864bd95b396f75eb81f9782a7546ab3083d04a23becf5353d3fcef84caf33">ASYNC2_FRAME</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="general_defines_8h.html#a3173864bd95b396f75eb81f9782a7546a70c19b41cacd13f7d36b327c73390e6e">ASYNC_OTHER</a>:</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="general_defines_8h.html#a3173864bd95b396f75eb81f9782a7546a510a027cf7f5c94cceaf5f8b08d81898">STATE_FRAME</a>:</div><div class="line">            msg.Format(<span class="stringliteral">&quot;Async message Type: %d, Message: &#39;%s&#39;&quot;</span>,frameType,csMessage);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="general_defines_8h.html#a59c4f698bc66561dff7c88db6b9d1f6a">ERR_ON_CLOSE</a>: <span class="comment">// event sent to the client from Dll saying connection is closed</span></div><div class="line">            <span class="comment">// Handle close event and free object</span></div><div class="line">            <a class="code" href="_k_m_api_8h.html#a3ddb56384a6d0d3f4c21a3669bff6333">MCFreeKMApi</a>(pKmapi);</div><div class="line">            pKmapi = NULL;</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            msg.Format(_T(<span class="stringliteral">&quot;Lost message: %d %s&quot;</span>),frameType,csMessage);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    }</div><div class="line">    OutputDebugString(msg);</div><div class="line">}</div></div><!-- fragment --><p> You can assign the callback like this: </p><div class="fragment"><div class="line"><a class="code" href="class_k_m_api.html#ac478ca1293fc8c15519b890004de4d94">SetCallback</a>(MyCallback);</div></div><!-- fragment --><p> Below is a full asynchronous example: </p><div class="fragment"><div class="line"><a class="code" href="class_k_m_api.html">KMApi</a>* pKmapi = <a class="code" href="_k_m_api_8h.html#ace4118c6ba20659c52106507061756cb">KMNewKMAPI</a>();</div><div class="line"><span class="keywordflow">if</span> (pKmapi != NULL)</div><div class="line">{</div><div class="line">    <span class="comment">// 10 seconds timeout for connect</span></div><div class="line">    pKmapi-&gt;<a class="code" href="class_k_m_api.html#a701f3f79e8e417b4e2687e95193623ee">SetTimeout</a>(<a class="code" href="general_defines_8h.html#a4bc0c5cb0ef29fb77d5bfc03383a0f01aa8d41dfd07f19106258b01ff94ac8531">KMTO_Connect</a>, 10000);</div><div class="line">    <span class="comment">// 15s timeout for command execution</span></div><div class="line">    pKmapi-&gt;<a class="code" href="class_k_m_api.html#a701f3f79e8e417b4e2687e95193623ee">SetTimeout</a>(<a class="code" href="general_defines_8h.html#a4bc0c5cb0ef29fb77d5bfc03383a0f01a18f6c972da47dc8dd9c0be724d58b760">KMTO_Exec</a>, 15000);</div><div class="line"></div><div class="line">    <span class="comment">// set the callback function</span></div><div class="line">    m_pKmapi-&gt;SetCallback(MyCallback);</div><div class="line"></div><div class="line">    <span class="comment">// connect to IP 10.0.0.5 port 4001</span></div><div class="line">    <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> iError = pKmapi-&gt;<a class="code" href="class_k_m_api.html#a62b9522caef12178123686bfaa8c0bd2">Connect</a>(<span class="stringliteral">&quot;10.0.0.5&quot;</span>, 4001);</div><div class="line">    <span class="keywordflow">if</span> (iError == <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cbaa899ce25ec47ef4f50799c40339e60496">KMRet_OK</a>) <span class="comment">// if connected</span></div><div class="line">    {</div><div class="line">    <span class="keywordtype">char</span> sOutBuffer[2048];</div><div class="line">    <span class="comment">// execute a command to start script</span></div><div class="line">        <span class="keywordflow">if</span> ((iError = pKmapi-&gt;<a class="code" href="class_k_m_api.html#ac3b7a85fa9c364f5d4a83eb3a9bb908f">ExecCommand</a>(<span class="stringliteral">&quot;LOAD myscript.prg&quot;</span>, sOutBuffer, 2048)) != <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cbaa899ce25ec47ef4f50799c40339e60496">KMRet_OK</a>)</div><div class="line">        {</div><div class="line">            ReportError(iError);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">//...</span></div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="a701f3f79e8e417b4e2687e95193623ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a701f3f79e8e417b4e2687e95193623ee">&#9670;&nbsp;</a></span>SetTimeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_k_m_api_8h.html#ae0351993802108783cd7af60e4527f83">void</a> KMApi::SetTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="general_defines_8h.html#a4bc0c5cb0ef29fb77d5bfc03383a0f01">KMTimeout</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DWORD&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the timeout to connect and for the execute commands.<br />
 Set timeout before connecting otherwise it'll use default timeouts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">KMTimeout</td><td>: The type of timeout you wish to set (see KMResponse for list of types) </td></tr>
    <tr><td class="paramname">timeout</td><td>timeout in milliseconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void<br />
<b>Example:</b> Setting and using timeout.<br />
: This example is for explanation purpose only.<br />
In general you want to call <a class="el" href="class_k_m_api.html#a9a01d4d06c5c8daf98b12496e0cd4b4c">GetLastError</a> no matter what error it was.<br />
<div class="fragment"><div class="line">...</div><div class="line">if (pKmapi != NULL)</div><div class="line">{</div><div class="line">    <span class="comment">// 10 seconds timeout for connection</span></div><div class="line">    pKmapi-&gt;<a class="code" href="class_k_m_api.html#a701f3f79e8e417b4e2687e95193623ee">SetTimeout</a>(<a class="code" href="general_defines_8h.html#a4bc0c5cb0ef29fb77d5bfc03383a0f01aa8d41dfd07f19106258b01ff94ac8531">KMTO_Connect</a>, 10000);</div><div class="line"></div><div class="line">    <span class="comment">// 15s timeout for command execution</span></div><div class="line">    pKmapi-&gt;<a class="code" href="class_k_m_api.html#a701f3f79e8e417b4e2687e95193623ee">SetTimeout</a>(<a class="code" href="general_defines_8h.html#a4bc0c5cb0ef29fb77d5bfc03383a0f01a18f6c972da47dc8dd9c0be724d58b760">KMTO_Exec</a>, 15000);</div><div class="line"></div><div class="line">    <span class="comment">// connect to IP 10.0.0.5 port 4001</span></div><div class="line">    <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> iError = pKmapi-&gt;<a class="code" href="class_k_m_api.html#a62b9522caef12178123686bfaa8c0bd2">Connect</a>(<span class="stringliteral">&quot;10.0.0.5&quot;</span>, 4001);</div><div class="line">    <span class="keywordflow">if</span> (iError == <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cbaa899ce25ec47ef4f50799c40339e60496">KMRet_OK</a>) <span class="comment">// if connected</span></div><div class="line">    {</div><div class="line">        <span class="keywordtype">char</span> sOutBuffer[2048];</div><div class="line">        <span class="comment">// execute a command to start script</span></div><div class="line">        <span class="keywordflow">if</span> ((iError = pKmapi-&gt;<a class="code" href="class_k_m_api.html#ac3b7a85fa9c364f5d4a83eb3a9bb908f">ExecCommand</a>(<span class="stringliteral">&quot;?sys.info&quot;</span>, sOutBuffer, 2048)) != <a class="code" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cbaa899ce25ec47ef4f50799c40339e60496">KMRet_OK</a>)</div><div class="line">        {</div><div class="line">          ...</div><div class="line">        } <span class="keywordflow">else</span> </div><div class="line">            <span class="keywordflow">if</span> (iError == KMRet_TIMOUT)</div><div class="line">                OutputDebugString(<span class="stringliteral">&quot;Timeout: MC did not respond to command in 15 seconds&quot;</span>);</div><div class="line">    } </div><div class="line">    <span class="keywordflow">else</span> </div><div class="line">        <span class="keywordflow">if</span> (iError == KMRet_TIMOUT)</div><div class="line">            OutputDebugString(<span class="stringliteral">&quot;Timeout: MC did not respond to connection request in 10 seconds&quot;</span>);</div><div class="line">}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a967f83675211ba55f27e22e27ef6532c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a967f83675211ba55f27e22e27ef6532c">&#9670;&nbsp;</a></span>UploadFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba">KMResponse</a> KMApi::UploadFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_k_m_api_8h.html#a2e8d084ac9b8767f7cd78985326feac9">LPCSTR</a>&#160;</td>
          <td class="paramname"><em>Filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uploads a file to Soft MC. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Filename</td><td>A full path (a utf8 string) of the file to upload to Soft MC. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="general_defines_8h.html#a0b093a883ffd02bff0dae8f895501cba" title="a response code for all KMApi functions ">KMResponse</a> Return code. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_k_m_api_8h_source.html">KMApi.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
